apiVersion: machinelearning.seldon.io/v1
kind: SeldonDeployment
metadata:
  name: iris-test3
  namespace: seldon-deploy
spec:
  name: model
  predictors:
  - name: model

    componentSpecs:
    - spec:
        volumes:
        - name: iris-test-model-provision-location
          emptyDir: {}

        initContainers:
        - name: iris-test-model-initializer
          image: kfserving/storage-initializer:v0.4.1
          args:
            - "s3://mlflow/mlflow/artifacts/0/bc880d6510a846799ab8ea31f04dccb5/artifacts/iris_test"
            - "/mnt/models/iris-test"
          volumeMounts:
          - mountPath: /mnt/models/iris-test
            name: iris-test-model-provision-location
          envFrom:
          - secretRef:
              name: seldon-init-container-secret

        containers:
        - name: iris-test-model
          image: ghcr.io/mlops-for-all/mlflowserver
          volumeMounts:
          - mountPath: /mnt/models/iris-test
            name: iris-test-model-provision-location
            readOnly: true
          securityContext:
            privileged: true
            runAsUser: 0
            runAsGroup: 0

    graph:
      name: iris-test-model
      type: MODEL
      parameters:
      - name: model_uri
        type: STRING
        value: "/mnt/models/iris-test"
      children: []